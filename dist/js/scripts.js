const pokemonRepository=function(){document.querySelector(".pokemon-list");const e=document.querySelector("#modal-container"),t=(document.querySelector(".modal"),document.querySelector(".modal-close")),n=document.querySelector("#search-bar"),o=document.createElement("h1");o.classList.add("pokemon-name");const i=document.createElement("p");i.classList.add("pokemon-height");const c=document.createElement("img");c.classList.add("modal-img");const a=document.createElement("img");a.classList.add("modal-img");const s=document.createElement("p");s.classList.add("pokemon-weight");const l=document.createElement("p");l.classList.add("pokemon-types");const r=document.createElement("p");l.classList.add("pokemon-Abilities");let d=$(".modal-body"),m=$(".modal-title");$(".modal-header");m.empty(),d.empty(),m.append(o),d.append(c),d.append(a),d.append(i),d.append(s),d.append(l),d.append(r);const u=[];let p="https://pokeapi.co/api/v2/pokemon/?limit=150";function f(e){"object"==typeof e&&"name"in e&&"detailsUrl"in e?u.push(e):console.log("Incorrect entry.")}function h(){document.querySelector("#modal-container").classList.remove("is-visible")}function y(e){let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){e.imageUrlFront=t.sprites.front_default,e.imageUrlBack=t.sprites.back_default,e.height=t.height,e.weight=t.weight,e.types=t.types.map(function(e){return e.type.name}),e.abilities=t.abilities.map(function(e){return e.ability.name})}).catch(function(e){console.error(e)})}return t.addEventListener("click",h),window.addEventListener("keydown",e=>{const t=document.querySelector("#modal-container");"Escape"===e.key&&t.classList.contains("is-visible")&&h()}),e.addEventListener("click",t=>{t.target===e&&h()}),n.addEventListener("input",function(){const e=document.querySelectorAll("li");let t=n.value.toUpperCase();e.forEach(function(e){e.innerText.toUpperCase().indexOf(t)>-1?e.style.display="block":e.style.display="none"})}),{getAll:function(){return u},add:f,addListItem:function(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("li");n.classList.add("group-list-item");let d=document.createElement("button");d.innerText=e.name,d.classList.add("button-class","btn","btn-danger"),d.setAttribute("data-target","#modal-container"),d.setAttribute("data-toggle","modal"),n.appendChild(d),t.appendChild(n),d.addEventListener("click",function(t){!function(e){y(e).then(function(){!function(e){o.innerText=e.name.toUpperCase(),i.innerText="Height: "+e.height,c.src=e.imageUrlFront,a.src=e.imageUrlBack,s.innerText="Weight: "+e.weight,l.innerText="Types: "+e.types,r.innerText="Abilities: "+e.abilities;const t=document.querySelector("#modal-container");t.classList.add("is-visible"),t.classList.add("is-visible")}(e)})}(e)})},loadList:function(){return fetch(p).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){const t={name:e.name.toUpperCase(),detailsUrl:e.url};f(t),console.log(t)})}).catch(function(e){console.error(e)})},loadDetails:y}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});
